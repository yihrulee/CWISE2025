<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå½¢é£Ÿç‰©é¸æ“‡éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e1f5fe 100%);
            min-height: 100vh;
        }
        
        .food-item {
            transition: all 0.3s ease;
        }
        
        .food-item:hover {
            transform: scale(1.05);
        }
        
        .food-item.selected {
            border: 3px solid #4CAF50;
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .food-item.wrong {
            border: 3px solid #F44336;
            background-color: rgba(244, 67, 54, 0.1);
        }
        
        .food-item.correct {
            border: 3px solid #4CAF50;
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .timer-bar {
            transition: width 0.1s linear;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 1s infinite;
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <div class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-indigo-800 mb-2">åŸå½¢é£Ÿç‰©é¸æ“‡éŠæˆ²</h1>
            <p class="text-lg text-gray-700">åœ¨ 15 ç§’å…§é¸å‡ºæ‰€æœ‰çš„åŸå½¢é£Ÿç‰©ï¼Œæ¯é¸å°ä¸€å€‹å¾—1åˆ†ï¼Œé¸éŒ¯æ‰£1åˆ†ï¼</p>
        </div>
        
        <div class="bg-white rounded-lg shadow-lg p-4 mb-6">
            <div class="flex flex-wrap justify-between items-center">
                <div class="w-full md:w-auto mb-4 md:mb-0">
                    <div class="text-xl font-bold text-indigo-700">åˆ†æ•¸: <span id="score">0</span></div>
                </div>
                
                <div class="w-full md:w-1/2 mb-4 md:mb-0">
                    <div class="relative h-6 bg-gray-200 rounded-full overflow-hidden">
                        <div id="timer-bar" class="timer-bar h-full bg-indigo-600 rounded-full" style="width: 100%;"></div>
                    </div>
                    <div class="text-center mt-1 text-indigo-700 font-medium">å‰©é¤˜æ™‚é–“: <span id="timer">15</span> ç§’</div>
                </div>
                
                <div class="w-full md:w-auto flex justify-center">
                    <button id="start-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        é–‹å§‹éŠæˆ²
                    </button>
                    <button id="end-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-full shadow-md ml-4 transition duration-300 ease-in-out transform hover:scale-105 hidden">
                        çµæŸéŠæˆ²
                    </button>
                </div>
            </div>
        </div>
        
        <div id="game-area" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8 opacity-50 pointer-events-none">
            </div>
        
        <div id="result-area" class="bg-white rounded-lg shadow-lg p-6 text-center hidden">
            <h2 class="text-2xl font-bold text-indigo-800 mb-4">éŠæˆ²çµæŸï¼</h2>
            <p class="text-xl mb-2">ä½ çš„å¾—åˆ†: <span id="final-score" class="font-bold text-2xl text-indigo-700">0</span></p>
            <p class="text-lg mb-4">æ­£ç¢ºé¸æ“‡äº† <span id="correct-count" class="font-bold text-green-600">0</span> å€‹åŸå½¢é£Ÿç‰©</p>
            <p class="text-lg mb-4">éŒ¯èª¤é¸æ“‡äº† <span id="wrong-count" class="font-bold text-red-600">0</span> å€‹åŠ å·¥é£Ÿç‰©</p>
            
            <div class="mt-6">
                <button id="play-again-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                    å†ç©ä¸€æ¬¡
                </button>
            </div>
        </div>
    </div>

    <script>
        // é£Ÿç‰©è³‡æ–™
        const rawFoods = [
            "è˜‹æœ", "é¦™è•‰", "ç‰ç±³", "å°éº¥", "é»ƒè±†", "ç¨»ç±³", "é’èŠ±èœ", "ç‰ç±³ç­", "èƒ¡è˜¿è””", "é¦¬éˆ´è–¯",
            "æ´‹è”¥", "è•ƒèŒ„", "è’œé ­", "è èœ", "è˜†ç­", "å—ç“œ", "è‹¦ç“œ", "ç´…è±†", "èŠ‹é ­", "è¥¿ç“œ",
            "å¥‡ç•°æœ", "æŸšå­", "é®­é­š", "é›è›‹"
        ];
        
        const processedFoods = [
            "éºµç²‰", "ç½è£ç‰ç±³ç­", "è±†è…", "è±†æ¼¿", "éºµåŒ…", "é¤…ä¹¾", "ç‰ç±³ç‰‡", "ç‰ç±³ç½é ­", "éºµæ¢", "ç±³ç²‰",
            "æœæ±", "æœé†¬", "é†ƒèœ", "ç…™ç‡»é­šè‚‰", "ç½é ­é®ªé­š", "è”¬èœæ¹¯", "ç‚’èœ", "é¦¬éˆ´è–¯ç‰‡", "æœä¹¾", "é¦™è…¸",
            "é›è›‹ç³•", "èµ·å¸", "å†°æ·‡æ·‹"
        ];
        
        // éŠæˆ²è®Šæ•¸
        let score = 0;
        let timer = 15; // 3. ä¿®æ”¹åˆå§‹è®Šæ•¸ç‚º 15
        let gameInterval;
        let selectedFoods = [];
        let gameActive = false;
        let correctSelections = [];
        let wrongSelections = [];
        
        // DOM å…ƒç´ 
        const startBtn = document.getElementById('start-btn');
        const endBtn = document.getElementById('end-btn');
        const playAgainBtn = document.getElementById('play-again-btn');
        const gameArea = document.getElementById('game-area');
        const resultArea = document.getElementById('result-area');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const timerBar = document.getElementById('timer-bar');
        const finalScoreDisplay = document.getElementById('final-score');
        const correctCountDisplay = document.getElementById('correct-count');
        const wrongCountDisplay = document.getElementById('wrong-count');
        
        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            gameArea.innerHTML = '';
            score = 0;
            timer = 15; // 4. é‡ç½®æ™‚é–“æ™‚æ”¹ç‚º 15
            selectedFoods = [];
            correctSelections = [];
            wrongSelections = [];
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timer;
            timerBar.style.width = '100%';
            timerBar.classList.remove('bg-red-600');
            timerBar.classList.add('bg-indigo-600');
            timerDisplay.classList.remove('text-red-600', 'font-bold', 'pulse');
            
            const allFoods = [...rawFoods, ...processedFoods];
            const shuffledFoods = shuffleArray(allFoods);
            const selectedFoodsForGame = shuffledFoods.slice(0, 30);
            
            selectedFoodsForGame.forEach(food => {
                const foodItem = document.createElement('div');
                foodItem.className = 'food-item bg-white rounded-lg shadow-md p-4 flex flex-col items-center justify-center cursor-pointer transition-all';
                foodItem.dataset.name = food;
                foodItem.dataset.type = rawFoods.includes(food) ? 'raw' : 'processed';
                
                const emoji = getFoodEmoji(food);
                
                foodItem.innerHTML = `
                    <div class="text-4xl mb-2">${emoji}</div>
                    <div class="text-center font-medium">${food}</div>
                `;
                
                foodItem.addEventListener('click', () => selectFood(foodItem));
                gameArea.appendChild(foodItem);
            });
        }
        
        // é–‹å§‹éŠæˆ²
        function startGame() {
            gameActive = true;
            gameArea.classList.remove('opacity-50', 'pointer-events-none');
            startBtn.classList.add('hidden');
            endBtn.classList.remove('hidden');
            resultArea.classList.add('hidden');
            
            gameInterval = setInterval(() => {
                timer--;
                timerDisplay.textContent = timer;
                // 5. ä¿®æ”¹é€²åº¦æ¢è¨ˆç®—å…¬å¼ç‚º / 15
                timerBar.style.width = `${(timer / 15) * 100}%`;
                
                if (timer <= 3) {
                    timerBar.classList.add('bg-red-600');
                    timerBar.classList.remove('bg-indigo-600');
                    timerDisplay.classList.add('text-red-600', 'font-bold', 'pulse');
                }
                
                if (timer <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        // çµæŸéŠæˆ²
        function endGame() {
            gameActive = false;
            clearInterval(gameInterval);
            gameArea.classList.add('opacity-50', 'pointer-events-none');
            startBtn.classList.remove('hidden');
            endBtn.classList.add('hidden');
            timerBar.classList.remove('bg-red-600');
            timerBar.classList.add('bg-indigo-600');
            timerDisplay.classList.remove('text-red-600', 'font-bold', 'pulse');
            
            resultArea.classList.remove('hidden');
            finalScoreDisplay.textContent = score;
            correctCountDisplay.textContent = correctSelections.length;
            wrongCountDisplay.textContent = wrongSelections.length;
            
            const foodItems = document.querySelectorAll('.food-item');
            foodItems.forEach(item => {
                if (item.dataset.type === 'raw') {
                    item.classList.add('correct');
                } else {
                    item.classList.add('wrong');
                }
            });
        }
        
        function selectFood(foodItem) {
            if (!gameActive) return;
            const foodName = foodItem.dataset.name;
            const foodType = foodItem.dataset.type;
            if (selectedFoods.includes(foodName)) return;
            
            selectedFoods.push(foodName);
            foodItem.classList.add('selected');
            
            if (foodType === 'raw') {
                score++;
                correctSelections.push(foodName);
                scoreDisplay.textContent = score;
                foodItem.classList.add('correct');
            } else {
                score--;
                wrongSelections.push(foodName);
                scoreDisplay.textContent = score;
                foodItem.classList.add('wrong');
                foodItem.classList.add('shake');
                scoreDisplay.classList.add('text-red-600');
                setTimeout(() => scoreDisplay.classList.remove('text-red-600'), 500);
            }
        }
        
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function getFoodEmoji(food) {
            const emojiMap = {
                "è˜‹æœ": "ğŸ", "é¦™è•‰": "ğŸŒ", "ç‰ç±³": "ğŸŒ½", "å°éº¥": "ğŸŒ¾", "é»ƒè±†": "ğŸ«˜", "ç¨»ç±³": "ğŸš",
                "é’èŠ±èœ": "ğŸ¥¦", "ç‰ç±³ç­": "ğŸŒ½", "èƒ¡è˜¿è””": "ğŸ¥•", "é¦¬éˆ´è–¯": "ğŸ¥”", "æ´‹è”¥": "ğŸ§…",
                "è•ƒèŒ„": "ğŸ…", "è’œé ­": "ğŸ§„", "è èœ": "ğŸ¥¬", "è˜†ç­": "ğŸ¥¬", "å—ç“œ": "ğŸƒ", "è‹¦ç“œ": "ğŸ¥’",
                "ç´…è±†": "ğŸ«˜", "èŠ‹é ­": "ğŸ¥”", "è¥¿ç“œ": "ğŸ‰", "å¥‡ç•°æœ": "ğŸ¥", "æŸšå­": "ğŸŠ", "é®­é­š": "ğŸŸ",
                "é›è›‹": "ğŸ¥š", "éºµç²‰": "ğŸŒ¾", "ç½è£ç‰ç±³ç­": "ğŸ¥«", "è±†è…": "ğŸ§Š", "è±†æ¼¿": "ğŸ¥›",
                "éºµåŒ…": "ğŸ", "é¤…ä¹¾": "ğŸª", "ç‰ç±³ç‰‡": "ğŸŒ½", "ç‰ç±³ç½é ­": "ğŸ¥«", "éºµæ¢": "ğŸœ",
                "ç±³ç²‰": "ğŸœ", "æœæ±": "ğŸ§ƒ", "æœé†¬": "ğŸ¯", "é†ƒèœ": "ğŸ¥’", "ç…™ç‡»é­šè‚‰": "ğŸŸ",
                "ç½é ­é®ªé­š": "ğŸ¥«", "è”¬èœæ¹¯": "ğŸ²", "ç‚’èœ": "ğŸ²", "é¦¬éˆ´è–¯ç‰‡": "ğŸŸ", "æœä¹¾": "ğŸ‡",
                "é¦™è…¸": "ğŸŒ­", "é›è›‹ç³•": "ğŸ°", "èµ·å¸": "ğŸ§€", "å†°æ·‡æ·‹": "ğŸ¦"
            };
            return emojiMap[food] || "ğŸ½ï¸";
        }
        
        startBtn.addEventListener('click', () => {
            initGame();
            startGame();
        });
        endBtn.addEventListener('click', endGame);
        playAgainBtn.addEventListener('click', () => {
            initGame();
            startGame();
        });
        
        initGame();
    </script>
</body>
</html>