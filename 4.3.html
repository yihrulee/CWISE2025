<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-4 äººé«”çš„é˜²ç¦¦ä½œç”¨ï¼šç¸½çµæ€§è©•é‡</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --correct-color: #27ae60;
            --wrong-color: #e74c3c;
            --warning-color: #f39c12;
            --bg-color: #f1f4f9;
        }
        body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background-color: var(--bg-color); color: var(--primary-color); padding: 20px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { text-align: center; color: var(--primary-color); border-bottom: 3px solid var(--secondary-color); padding-bottom: 10px; }
        .intro { background: #e8f4fd; padding: 15px; border-radius: 8px; margin-bottom: 30px; font-size: 0.95em; }
        
        .question-block { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px dashed #ccc; }
        .question-title { font-size: 1.15em; font-weight: bold; margin-bottom: 15px; color: #34495e; line-height: 1.5; }
        .options-grid { display: grid; gap: 12px; }
        .option-label { display: flex; align-items: center; padding: 12px 15px; border: 1.5px solid #dcdfe6; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .option-label:hover { background-color: #f9fbff; border-color: var(--secondary-color); }
        .option-label input { margin-right: 12px; transform: scale(1.2); }
        
        input[type="radio"]:checked + span { font-weight: bold; color: var(--secondary-color); }
        input[type="radio"]:checked + .option-label { border-color: var(--secondary-color); background-color: #f0f7ff; }

        .quiz-image-box { background: #fff; border: 1px solid #eee; padding: 15px; margin: 15px 0; border-radius: 8px; text-align: center; }
        .chart-label { font-size: 12px; fill: #7f8c8d; }

        .submit-area { text-align: center; margin-top: 50px; }
        .btn-submit { background-color: var(--secondary-color); color: white; padding: 15px 60px; border: none; border-radius: 30px; font-size: 1.2em; cursor: pointer; transition: 0.3s; }
        .btn-submit:hover { background-color: #2980b9; transform: translateY(-2px); }

        #result-display { display: none; margin-top: 40px; }
        .score-box { text-align: center; padding: 30px; background: white; border: 4px solid var(--secondary-color); border-radius: 15px; margin-bottom: 30px; }
        .score-num { font-size: 2.5em; font-weight: bold; color: var(--secondary-color); margin: 15px 0; }
        .screenshot-notice { color: var(--wrong-color); font-weight: bold; font-size: 1.2em; margin-top: 10px; border: 2px dashed var(--wrong-color); display: inline-block; padding: 10px 20px; border-radius: 5px; background: #fff5f5; }
        
        .diagnostic-card { border: 2px solid var(--warning-color); border-radius: 12px; padding: 20px; margin-bottom: 25px; background: #fffdf6; display: flex; gap: 20px; align-items: flex-start; }
        .diagnostic-icon { font-size: 2.5em; flex-shrink: 0; }
        .diagnostic-content h4 { margin: 0 0 10px 0; color: #d35400; font-size: 1.2em; }
        .diagnostic-content p { margin: 0; font-size: 0.95em; color: #5d4037; line-height: 1.6; }

        .feedback-item { padding: 15px; margin-bottom: 15px; border-radius: 8px; border-left: 6px solid #ccc; background: #fff; border-top: 1px solid #eee; border-right: 1px solid #eee; border-bottom: 1px solid #eee; }
        .feedback-item.correct { border-left-color: var(--correct-color); background: #f1fcf4; }
        .feedback-item.wrong { border-left-color: var(--wrong-color); background: #fff5f5; }
        .feedback-q-text { font-weight: bold; color: #34495e; display: block; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h1>äººé«”é˜²ç¦¦ä½œç”¨ï¼šç¸½çµæ€§è©•é‡</h1>
    <div class="intro">
        ğŸ’¡ <b>å¡«å¯«èªªæ˜ï¼š</b> è«‹å®Œæˆä¸‹æ–¹ 15 é¡Œå–®é¸é¡Œã€‚æäº¤å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•åˆ†æä½ çš„éŒ¯é¡Œï¼Œä¸¦ç”Ÿæˆå€‹åˆ¥è¨ºæ–·å»ºè­°ã€‚
    </div>

    <form id="quiz-form">
        <div id="questions-container"></div>
        <div class="submit-area">
            <button type="button" class="btn-submit" onclick="gradeQuiz()">æäº¤ç­”æ¡ˆä¸¦ç”Ÿæˆå ±å‘Š</button>
        </div>
    </form>

    <div id="result-display">
        <div class="score-box">
            <h2>ç¸½çµæ€§è©•é‡æˆç¸¾</h2>
            <div class="score-num" id="final-score-text">ä½ ç­”å°äº† 0 / 15 é¡Œ</div>
            <p id="evaluation-text" style="font-weight: bold;"></p>
            <div class="screenshot-notice">ğŸ“¸ è«‹å°‡è©•é‡æˆç¸¾æˆªåœ–ä¸Šå‚³</div>
        </div>

        <h3 id="diagnosis-title">ğŸ©º é‡å°æ€§è¤‡ç¿’å»ºè­°ï¼ˆæ ¹æ“šä½ çš„éŒ¯é¡Œåˆ†æï¼‰</h3>
        <div id="diagnosis-container"></div>

        <hr style="margin: 40px 0;">
        <h3>é€é¡Œè©³ç´°è§£æ</h3>
        <div id="analysis-container"></div>
        <div style="text-align:center; margin-top:20px;">
            <button class="btn-submit" onclick="window.scrollTo(0,0); location.reload();">é‡æ–°æ¸¬è©¦</button>
        </div>
    </div>
</div>

<script>
    // ç¨ç«‹å®šç¾© SVG åœ–è¡¨ï¼Œç¢ºä¿ä¸å¹²æ“¾é¡Œæ–‡å­—ä¸²
    const chartHtml = `
    <div class="quiz-image-box">
        <svg width="320" height="190" viewBox="0 0 320 190">
            <line x1="40" y1="150" x2="300" y2="150" stroke="#333" stroke-width="2" />
            <line x1="40" y1="150" x2="40" y2="20" stroke="#333" stroke-width="2" />
            <text x="10" y="25" class="chart-label" writing-mode="tb">é˜²ç¦¦å¼·åº¦</text>
            <text x="270" y="140" class="chart-label">æ™‚é–“</text>
            <path d="M 40 150 Q 80 80 120 150" fill="none" stroke="#3498db" stroke-width="3" />
            <text x="50" y="95" class="chart-label" fill="#3498db">ç¬¬ä¸€æ¬¡åæ‡‰</text>
            <text x="25" y="170" class="chart-label" font-weight="bold">æ‰“ç–«è‹—</text>
            <path d="M 220 150 Q 255 -20 290 150" fill="none" stroke="#e74c3c" stroke-width="3" />
            <text x="225" y="45" class="chart-label" fill="#e74c3c">ç¬¬äºŒæ¬¡åæ‡‰</text>
            <text x="205" y="170" class="chart-label" font-weight="bold">ç—…åŸé«”å…¥ä¾µ</text>
        </svg>
    </div>`;

    const quizData = [
        { q: "ç’°å¢ƒä¸­æœ‰äº›å¾®ç”Ÿç‰©æœƒå°è‡´ç”Ÿç‰©é«”ç”Ÿç—…ï¼Œä¾‹å¦‚ç—…æ¯’æˆ–ç´°èŒç­‰ï¼Œæˆ‘å€‘çµ±ç¨±ç‚ºä¸‹åˆ—ä½•è€…ï¼Ÿ", options: ["ç—…åŸé«”", "è¡€å°æ¿", "çµ„ç¹”æ¶²", "æŠ—é«”"], correct: 0, cat: "åŸºç¤", feedback: "æœƒå°è‡´ç–¾ç—…çš„å¾®ç”Ÿç‰©ç¨±ç‚ºç—…åŸé«” [cite: 218]ã€‚" },
        { q: "äººé«”é˜²ç¦¦ä½œç”¨ä¸­ï¼Œç¬¬ä¸€é“é˜²ç·šä¸»è¦æ˜¯é çš®è†œçš„é˜»éš”ï¼Œä¸‹åˆ—ä½•è€…ã€Œä¸å±¬æ–¼ã€æ­¤ç¯„ç–‡ï¼Ÿ", options: ["çš®è†šé˜»éš”", "èƒƒéƒ¨çš„é¹½é…¸", "å‘¼å¸é“çš„é»è†œ", "ç™½è¡€çƒçš„åå™¬"], correct: 3, cat: "çš®è†œ", feedback: "ç™½è¡€çƒå±¬æ–¼ç¬¬äºŒæˆ–ç¬¬ä¸‰é“é˜²ç·šï¼Œä¸å±¬æ–¼ç¬¬ä¸€é“çš®è†œé˜»éš” [cite: 226, 233]ã€‚" },
        { q: "æœ‰é—œäººé«”ç¬¬ä¸€é“é˜²ç·šï¼ˆçš®è†œé˜»éš”ï¼‰çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["åªå°ç´°èŒæœ‰æ•ˆ", "å±¬æ–¼éå°ˆä¸€æ€§é˜²ç¦¦ä½œç”¨", "æœƒç”¢ç”ŸæŠ—é«”ä¾†é˜»æ“‹ç•°ç‰©", "å—ææ™‚æœƒå‡ºç¾ç™¼ç‚åæ‡‰"], correct: 1, cat: "çš®è†œ", feedback: "çš®è†œé˜»éš”å±¬æ–¼éå°ˆä¸€æ€§é˜²ç¦¦ï¼Œä¸é‡å°ç‰¹å®šçš„ç—…åŸé«” [cite: 247]ã€‚" },
        { q: "ç•¶ç—…åŸé«”çªç ´çš®è†œå¾Œï¼Œå—å‚·éƒ¨ä½å‡ºç¾ã€Œç´…ã€ç†±ã€è…«ã€ç—›ã€çš„ç¾è±¡æ™‚ï¼Œç¨±ç‚ºä¸‹åˆ—ä½•è€…ï¼Ÿ", options: ["å°ˆä¸€æ€§åæ‡‰", "ç™¼ç‚åæ‡‰", "æŠ—é«”åæ‡‰", "ç–«è‹—åæ‡‰"], correct: 1, cat: "éå°ˆä¸€", feedback: "ç´…ã€ç†±ã€è…«ã€ç—›æ˜¯å…¸å‹çš„ç™¼ç‚åæ‡‰ [cite: 236]ã€‚" },
        { q: "æœ‰é—œã€Œç™¼ç‚åæ‡‰ã€çš„ç”Ÿç†æ„ç¾©ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["ä»£è¡¨ç—…åŸé«”ç²å‹äº†", "å¯ä¿ƒä½¿ç™½è¡€çƒèšé›†åå™¬ç—…åŸé«”", "æ˜¯ç‚ºäº†ç”¢ç”Ÿæ›´å¤šç´…è¡€çƒæ”œæ°§", "æ˜¯ä¸€ç¨®ç¬¬ä¸‰é“é˜²ç¦¦æ©Ÿåˆ¶"], correct: 1, cat: "éå°ˆä¸€", feedback: "ç™¼ç‚åæ‡‰å¯ä¿ƒä½¿ç™½è¡€çƒèšé›†ï¼Œä»¥åå™¬ä¸¦åˆ†è§£å…¥ä¾µçš„ç—…åŸé«” [cite: 237, 246]ã€‚" },
        { q: "ç™½è¡€çƒåœ¨ç¬¬äºŒé“é˜²ç¦¦ä¸­ä¸»è¦çš„ä½œæˆ°æ–¹å¼ç‚ºä½•ï¼Ÿ", options: ["ç”¢ç”ŸæŠ—é«”", "é€²è¡Œåå™¬ä½œç”¨", "æ§‹æˆç‰©ç†å±éšœ", "åˆ†æ³Œæ¶ˆåŒ–é¹½é…¸"], correct: 1, cat: "éå°ˆä¸€", feedback: "ç¬¬äºŒé“é˜²ç¦¦ä¸»è¦é ç™½è¡€çƒé€²è¡Œåå™¬ä½œç”¨ [cite: 235, 282]ã€‚" },
        { q: "é—œæ–¼ã€ŒæŠ—é«”ã€çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["å±¬æ–¼éå°ˆä¸€æ€§é˜²ç¦¦", "ç”±ç‰¹å®šç¨®é¡çš„ç™½è¡€çƒç”¢ç”Ÿ", "å¯ä»¥åå™¬æ‰€æœ‰ç´°èŒ", "å±¬æ–¼äººé«”çš„ç¬¬ä¸€é“é˜²ç·š"], correct: 1, cat: "å°ˆä¸€", feedback: "æœ‰ä¸€é¡ç™½è¡€çƒå¯ä»¥ç”¢ç”ŸæŠ—é«”ï¼Œå°ç—…åŸé«”å…·æœ‰å°ˆä¸€æ€§ [cite: 257, 259]ã€‚" },
        { q: "ç¬¬ä¸‰é“é˜²ç¦¦ä½œç”¨ä¸­ï¼Œé™¤ç”¢ç”ŸæŠ—é«”å¤–ï¼Œå¦ä¸€ç¨®ç‰¹æ®Šç¨®é¡çš„ç™½è¡€çƒåŠŸèƒ½ç‚ºä½•ï¼Ÿ", options: ["é˜»æ“‹é£Ÿç‰©ä¸­ç—…åŸé«”", "å¼•ç™¼ç™¼ç‚åæ‡‰", "ç ´å£è¢«æ„ŸæŸ“çš„ç´°èƒ", "ä¿®å¾©çš®è†šå‚·å£"], correct: 2, cat: "å°ˆä¸€", feedback: "ä¸€é¡ç™½è¡€çƒå¯ç ´å£è¢«æ„ŸæŸ“çš„ç´°èƒï¼Œé˜»æ­¢ç—…åŸé«”ç¹¼çºŒç¹æ®– [cite: 257]ã€‚" },
        { q: "ç‚ºä»€éº¼æ–½æ‰“æµæ„Ÿç–«è‹—å¾Œï¼Œé‚„æ˜¯æœ‰å¯èƒ½æ„ŸæŸ“åˆ°ã€Œæ°´ç—˜ã€ï¼Ÿ", options: ["å› ç‚ºç–«è‹—å“è³ªä¸ä½³", "å› ç‚ºæµæ„Ÿç–«è‹—ä¸å…·è¨˜æ†¶æ€§", "å› ç‚ºç¬¬ä¸‰é“é˜²ç¦¦å…·å°ˆä¸€æ€§", "å› ç‚ºæ°´ç—˜ä¸éœ€è¦ç–«è‹—é é˜²"], correct: 2, cat: "å°ˆä¸€", feedback: "å°ˆä¸€æ€§é˜²ç¦¦åªå°ç‰¹å®šçš„ç—…åŸé«”ç”¢ç”Ÿåæ‡‰ [cite: 259]ã€‚" },
        { q: "æ–½æ‰“ç–«è‹—é é˜²ç–¾ç—…çš„åŸç†ï¼Œä¸»è¦æ˜¯åˆ©ç”¨å°ˆä¸€æ€§é˜²ç¦¦ä½œç”¨çš„å“ªç¨®ç‰¹æ€§ï¼Ÿ", options: ["å³æ™‚æ€§", "éå°ˆä¸€æ€§", "è¨˜æ†¶æ€§", "åŒ–å­¸é˜»éš”æ€§"], correct: 2, cat: "ç–«è‹—", feedback: "ç–«è‹—æ˜¯é‹ç”¨å°ˆä¸€æ€§é˜²ç¦¦ä½œç”¨çš„è¨˜æ†¶æ€§ä¾†é”åˆ°ä¿è­·æ•ˆæœ [cite: 264]ã€‚" },
        { q: "ç•¶äººé«”ã€Œç¬¬äºŒæ¬¡ã€æ„ŸæŸ“ç›¸åŒçš„ç—…åŸé«”æ™‚ï¼Œå…¶é˜²ç¦¦åæ‡‰æœ‰ä½•ç‰¹é»ï¼Ÿ", options: ["åæ‡‰è®Šæ…¢", "åæ‡‰æ›´å¿«ã€æ•ˆæœæ›´å¼·", "å®Œå…¨ä¸ç”¢ç”ŸæŠ—é«”", "åªèƒ½é çš®è†œé˜»éš”"], correct: 1, cat: "ç–«è‹—", feedback: "ç”±æ–¼èº«é«”æœ‰è¨˜æ†¶æ€§ï¼Œç¬¬äºŒæ¬¡æ„ŸæŸ“æ™‚åæ‡‰æ›´å¿«ä¸”å¼·åº¦æ›´å¼· [cite: 265, 277]ã€‚" },
        { q: "è§€å¯Ÿä¸‹åœ–æ›²ç·šï¼Œç•¶äººé«”çœŸæ­£æ„ŸæŸ“åˆ°èˆ‡ç–«è‹—ç›¸åŒçš„ç—…åŸé«”æ™‚ï¼Œæ›²ç·šå‘ˆç¾å‡ºä»€éº¼æ¨£çš„è®ŠåŒ–ï¼Ÿ" + chartHtml, options: ["åæ‡‰è®Šæ…¢ä¸”å¼·åº¦è®Šå¼±", "åæ‡‰è®Šå¿«ä¸”å¼·åº¦è®Šå¼·", "å¼·åº¦ç¶­æŒä¸è®Š", "æ›²ç·šæœƒå®Œå…¨æ¶ˆå¤±"], correct: 1, cat: "ç–«è‹—", feedback: "ç”±åœ–å¯çŸ¥ï¼Œç¬¬äºŒæ¬¡æ¥è§¸ç›¸åŒç—…åŸé«”æ™‚ï¼Œé˜²ç¦¦å¼·åº¦æœƒè¿…é€Ÿå¤§å¹…æå‡ [cite: 265, 277]ã€‚" },
        { q: "æœ‰é—œäººé«”é˜²ç¦¦ä½œç”¨çš„é…å°ï¼Œä¸‹åˆ—ä½•è€…ã€ŒéŒ¯èª¤ã€ï¼Ÿ", options: ["çš®è†œé˜»éš”â€”ç¬¬ä¸€é“é˜²ç·š", "åå™¬ä½œç”¨â€”éå°ˆä¸€æ€§é˜²ç¦¦", "æŠ—é«”ä½œç”¨â€”ç¬¬äºŒé“é˜²ç·š", "ç™¼ç‚åæ‡‰â€”éå°ˆä¸€æ€§é˜²ç¦¦"], correct: 2, cat: "åŸºç¤", feedback: "æŠ—é«”ä½œç”¨å±¬æ–¼ç¬¬ä¸‰é“é˜²ç¦¦ï¼ˆå°ˆä¸€æ€§é˜²ç¦¦ï¼‰[cite: 255, 282]ã€‚" },
        { q: "äººé«”æ„Ÿå†’æ™‚å–‰åš¨ç—›ï¼Œåƒä¸‹çš„è—¥ç‰©å¦‚ä½•åˆ°é”æ‚£éƒ¨ï¼Ÿ", options: ["ç¶“ç”±å‘¼å¸é“ç›´æ¥åˆ°é”", "ç¶“ç”±ç¥ç¶“ç³»çµ±å‚³é", "ç¶“ç”±è¡€æ¶²å¾ªç’°é‹è¼¸", "ç¶“ç”±æ·‹å·´ç³»çµ±éæ¿¾"], correct: 2, cat: "åŸºç¤", feedback: "ç‰©è³ªåœ¨é«”å…§ä¾è³´å¾ªç’°ç³»çµ±é‹è¼¸å®Œæˆ [cite: 15, 310]ã€‚" },
        { q: "é™¤æ¥ç¨®ç–«è‹—å¤–ï¼Œä¸‹åˆ—ä½•ç¨®è¡Œç‚ºæ›´æœ‰åŠ©æ–¼å…ç–«ç³»çµ±ç™¼æ®åŠŸèƒ½æ¶ˆæ»…å…¥ä¾µè€…ï¼Ÿ", options: ["åªåƒå–®ä¸€é«˜è›‹ç™½é£Ÿç‰©", "æ³¨æ„é£²é£Ÿå’Œè¦å¾‹ä½œæ¯", "å„˜é‡æ¸›å°‘ç¡çœ æ™‚é–“", "è‡ªè¡Œè³¼è²·å¼·åŠ›é¹½é…¸é£²ç”¨"], correct: 1, cat: "åŸºç¤", feedback: "é™¤äº†æ–½æ‰“ç–«è‹—ï¼Œè‰¯å¥½çš„é£²é£Ÿèˆ‡ä½œæ¯ä¹Ÿæ˜¯ç¶­æŒå…ç–«åŠŸèƒ½çš„é—œéµ [cite: 260]ã€‚" }
    ];

    const diagnosisTips = {
        "åŸºç¤": { icon: "ğŸŒ±", title: "é˜²ç¦¦æ¦‚å¿µåŸºç¤", text: "ä½ å°ç—…åŸé«”çš„å®šç¾©æˆ–ç‰©è³ªé‹è¼¸æ–¹å¼ä»æœ‰äº›æ¨¡ç³Šã€‚è¨˜å¾—ï¼šå¾ªç’°ç³»çµ±æ˜¯é«”å…§çš„ç‰©æµï¼Œè² è²¬é‹é€è—¥ç‰©èˆ‡é˜²è¡›å…µåŠ› [cite: 15, 218]ã€‚" },
        "çš®è†œ": { icon: "ğŸ›¡ï¸", title: "ç¬¬ä¸€é“ï¼šçš®è†œé˜»éš”", text: "çš®è†šèˆ‡é»è†œæ˜¯èº«é«”çš„å®ˆé–€å“¡ã€‚é™¤äº†ç‰©ç†é˜»éš”ï¼Œèƒƒé…¸èˆ‡é…µç´ çš„åŒ–å­¸ç ´å£ä¹Ÿå±¬æ–¼é€™ä¸€é“é˜²ç·š [cite: 226-227]ã€‚" },
        "éå°ˆä¸€": { icon: "ğŸ”¥", title: "ç¬¬äºŒé“ï¼šç™¼ç‚èˆ‡åå™¬", text: "ç™¼ç‚ï¼ˆç´…è…«ç†±ç—›ï¼‰ä¸æ˜¯å£äº‹ï¼Œæ˜¯èº«é«”åœ¨å«æ´è»ï¼ç™½è¡€çƒèšé›†åˆ°å‚·å£æ˜¯ç‚ºäº†å¤§å£åæ‰å…¥ä¾µè€… [cite: 236-237]ã€‚" },
        "å°ˆä¸€": { icon: "ğŸ¯", title: "ç¬¬ä¸‰é“ï¼šå°ˆä¸€æ€§é˜²ç¦¦", text: "é€™æ˜¯é‡å°æ€§çš„ç‹™æ“Šã€‚ç‰¹å®šç™½è¡€çƒç”¢ç”Ÿçš„æŠ—é«”å°±åƒä¸€æŠŠé‘°åŒ™é–‹ä¸€æŠŠé–ï¼Œåªé‡å°ç‰¹å®šçš„ç—…åŸé«”æœ‰æ•ˆ [cite: 257-259]ã€‚" },
        "ç–«è‹—": { icon: "ğŸ’‰", title: "ç–«è‹—åŸç†èˆ‡è¨˜æ†¶", text: "ç–«è‹—æ˜¯è®“èº«é«”å…ˆã€é æ¼”ã€ã€‚åˆ©ç”¨è¨˜æ†¶æ€§ï¼Œç•¶çœŸæ­£çš„æ•µäººå…¥ä¾µæ™‚ï¼Œèº«é«”çš„ç«åŠ›ï¼ˆå¼·åº¦ï¼‰æœƒåæ‡‰æ›´å¿«ã€æ›´çŒ›çƒˆ [cite: 264, 277]ã€‚" }
    };

    function initQuiz() {
        const container = document.getElementById('questions-container');
        container.innerHTML = ''; // æ¸…ç©ºèˆŠå…§å®¹
        quizData.forEach((item, index) => {
            const qDiv = document.createElement('div');
            qDiv.className = 'question-block';
            qDiv.innerHTML = `
                <div class="question-title">${index + 1}. ${item.q}</div>
                <div class="options-grid">
                    ${item.options.map((opt, i) => `
                        <label class="option-label">
                            <input type="radio" name="q${index}" value="${i}">
                            <span>${opt}</span>
                        </label>
                    `).join('')}
                </div>
            `;
            container.appendChild(qDiv);
        });
    }

    function gradeQuiz() {
        let score = 0;
        let wrongCats = new Set();
        const analysis = document.getElementById('analysis-container');
        analysis.innerHTML = '';
        let allAnswered = true;

        for (let i = 0; i < quizData.length; i++) {
            const selected = document.querySelector(`input[name='q${i}']:checked`);
            if (!selected) {
                allAnswered = false;
                break;
            }
        }

        if (!allAnswered) {
            alert("é‚„æœ‰é¡Œç›®æ²’å¯«å®Œå–”ï¼è«‹æª¢æŸ¥ä¸€ä¸‹ã€‚");
            return;
        }

        quizData.forEach((item, index) => {
            const selected = document.querySelector(`input[name='q${index}']:checked`);
            const userAns = parseInt(selected.value);
            const isCorrect = userAns === item.correct;
            
            if (isCorrect) {
                score++;
            } else {
                wrongCats.add(item.cat);
            }

            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback-item ${isCorrect ? 'correct' : 'wrong'}`;
            const cleanQ = item.q.split('<div')[0]; // ç§»é™¤è§£æä¸­é‡è¤‡å‡ºç¾çš„åœ–è¡¨ä»£ç¢¼
            feedbackDiv.innerHTML = `
                <span class="feedback-q-text">ç¬¬ ${index + 1} é¡Œï¼š${cleanQ}</span>
                <strong>çµæœï¼š${isCorrect ? 'âœ… æ­£ç¢º' : 'âŒ éŒ¯èª¤'}</strong><br>
                æ‚¨çš„é¸æ“‡ï¼š${item.options[userAns]}<br>
                æ­£ç¢ºç­”æ¡ˆï¼š${item.options[item.correct]}
                <p>ğŸ’¡ è§£æï¼š${item.feedback}</p>
            `;
            analysis.appendChild(feedbackDiv);
        });

        // é¡¯ç¤ºæˆç¸¾èˆ‡è¨ºæ–·å ±å‘Š
        document.getElementById('final-score-text').innerText = `ä½ ç­”å°äº† ${score} / 15 é¡Œ`;
        
        const diagContainer = document.getElementById('diagnosis-container');
        diagContainer.innerHTML = '';
        if (wrongCats.size === 0) {
            diagContainer.innerHTML = '<div class="diagnostic-card" style="border-color: var(--correct-color); background: #f1fcf4;"><div class="diagnostic-icon">ğŸ…</div><div class="diagnostic-content"><h4>é˜²ç¦¦å¤§å¸«ï¼</h4><p>æ­å–œä½ ï¼ä½ å·²ç¶“å®Œå…¨æŒæ¡äº†äººé«”é˜²ç¦¦æ©Ÿåˆ¶çš„æ‰€æœ‰æ ¸å¿ƒè§€å¿µï¼</p></div></div>';
        } else {
            wrongCats.forEach(cat => {
                const tip = diagnosisTips[cat];
                const card = document.createElement('div');
                card.className = 'diagnostic-card';
                card.innerHTML = `<div class="diagnostic-icon">${tip.icon}</div><div class="diagnostic-content"><h4>${tip.title}</h4><p>${tip.text}</p></div>`;
                diagContainer.appendChild(card);
            });
        }

        let evalText = score === 15 ? "ğŸ† å¯¦åŠ›é©šäººï¼ä½ æ˜¯å…ç–«ç³»çµ±çš„æŒ‡æ®å®˜ï¼" : score >= 12 ? "âœ¨ è¡¨ç¾å„ªç§€ï¼åªéœ€è¦é‡æ¸…è¨ºæ–·å ±å‘Šä¸­çš„åˆ†æå³å¯ã€‚" : "ğŸ“– åŸºç¤è§€å¿µå°šå¯ï¼Œè«‹å‹™å¿…è©³é–±ä¸‹æ–¹è¨ºæ–·å»ºè­°ã€‚";
        document.getElementById('evaluation-text').innerText = evalText;
        document.getElementById('quiz-form').style.display = 'none';
        document.getElementById('result-display').style.display = 'block';
        window.scrollTo(0, 0);
    }

    // ç¢ºä¿ DOM è¼‰å…¥å¾Œæ‰åŸ·è¡Œåˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', initQuiz);
</script>
</body>
</html>