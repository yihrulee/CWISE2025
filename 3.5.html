<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-5-1 å¿ƒè¡€ç®¡ç³»çµ±ï¼šç¸½çµæ€§è©•é‡</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --correct-color: #27ae60;
            --wrong-color: #e74c3c;
            --warning-color: #f39c12;
            --bg-color: #f1f4f9;
        }
        body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background-color: var(--bg-color); color: var(--primary-color); padding: 20px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h1 { text-align: center; color: var(--primary-color); border-bottom: 3px solid var(--secondary-color); padding-bottom: 10px; }
        .intro { background: #e8f4fd; padding: 15px; border-radius: 8px; margin-bottom: 30px; font-size: 0.95em; }
        
        .question-block { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px dashed #ccc; }
        .question-title { font-size: 1.15em; font-weight: bold; margin-bottom: 15px; color: #34495e; }
        .options-grid { display: grid; gap: 12px; }
        .option-label { display: flex; align-items: center; padding: 12px 15px; border: 1.5px solid #dcdfe6; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .option-label:hover { background-color: #f9fbff; border-color: var(--secondary-color); }
        .option-label input { margin-right: 12px; transform: scale(1.2); }
        
        input[type="radio"]:checked + span { font-weight: bold; color: var(--secondary-color); }
        input[type="radio"]:checked + .option-label { border-color: var(--secondary-color); background-color: #f0f7ff; }

        .submit-area { text-align: center; margin-top: 50px; }
        .btn-submit { background-color: var(--secondary-color); color: white; padding: 15px 60px; border: none; border-radius: 30px; font-size: 1.2em; cursor: pointer; transition: 0.3s; }
        .btn-submit:hover { background-color: #2980b9; transform: translateY(-2px); }

        /* çµæœé¡¯ç¤ºèˆ‡è¨ºæ–·å€ */
        #result-display { display: none; margin-top: 40px; }
        .score-box { text-align: center; padding: 30px; background: white; border: 4px solid var(--secondary-color); border-radius: 15px; margin-bottom: 30px; }
        .score-num { font-size: 2.5em; font-weight: bold; color: var(--secondary-color); margin: 15px 0; }
        .screenshot-notice { color: var(--wrong-color); font-weight: bold; font-size: 1.2em; margin-top: 10px; border: 2px dashed var(--wrong-color); display: inline-block; padding: 5px 15px; border-radius: 5px; }
        
        /* è¨ºæ–·å¡ç‰‡è¨­è¨ˆ */
        .diagnostic-card { border: 2px solid var(--warning-color); border-radius: 12px; padding: 20px; margin-bottom: 25px; background: #fffdf6; display: flex; gap: 20px; align-items: flex-start; }
        .diagnostic-icon { font-size: 2.5em; flex-shrink: 0; }
        .diagnostic-content h4 { margin: 0 0 10px 0; color: #d35400; font-size: 1.2em; }
        .diagnostic-content p { margin: 0; font-size: 0.95em; color: #5d4037; line-height: 1.6; }

        .feedback-item { padding: 15px; margin-bottom: 15px; border-radius: 8px; border-left: 6px solid #ccc; }
        .feedback-item.correct { border-left-color: var(--correct-color); background: #f1fcf4; }
        .feedback-item.wrong { border-left-color: var(--wrong-color); background: #fff5f5; }
        .feedback-q-text { font-weight: bold; color: #34495e; display: block; margin-bottom: 5px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h1>äººé«”å¾ªç’°ç³»çµ±ï¼šç¸½çµæ€§è©•é‡</h1>
    <div class="intro">
        ğŸ’¡ <b>å¡«å¯«èªªæ˜ï¼š</b> æäº¤ç­”æ¡ˆå¾Œï¼Œç³»çµ±æœƒè‡ªå‹•åˆ†æä½ çš„éŒ¯èª¤é¡Œç›®ï¼Œä¸¦é‡å°ä½ æ··æ·†çš„è§€å¿µçµ¦äºˆã€Œå€‹åˆ¥è¨ºæ–·èˆ‡è¤‡ç¿’å»ºè­°ã€ã€‚
    </div>

    <form id="quiz-form">
        <div id="questions-container"></div>
        <div class="submit-area">
            <button type="button" class="btn-submit" onclick="gradeQuiz()">æäº¤ç­”æ¡ˆä¸¦ç”Ÿæˆå ±å‘Š</button>
        </div>
    </form>

    <div id="result-display">
        <div class="score-box">
            <h2>ç¸½çµæ€§è©•é‡æˆç¸¾</h2>
            <div class="score-num" id="final-score-text">ä½ ç­”å°äº† 0 / 15 é¡Œ</div>
            <p id="evaluation-text" style="font-weight: bold;"></p>
            <div class="screenshot-notice">è«‹å°‡è©•é‡æˆç¸¾æˆªåœ–ä¸Šå‚³</div>
        </div>

        <h3 id="diagnosis-title">ğŸ©º é‡å°æ€§è¤‡ç¿’å»ºè­°ï¼ˆæ ¹æ“šä½ çš„éŒ¯é¡Œåˆ†æï¼‰</h3>
        <div id="diagnosis-container"></div>

        <hr style="margin: 40px 0;">
        <h3>é€é¡Œè©³ç´°è§£æ</h3>
        <div id="analysis-container"></div>
        <div style="text-align:center; margin-top:20px;">
            <button class="btn-submit" onclick="window.scrollTo(0,0); location.reload();">é‡æ–°æ¸¬è©¦</button>
        </div>
    </div>
</div>

<script>
    const quizData = [
        { q: "ç•¶æˆ‘å€‘è§€å¯Ÿå¿ƒè‡Ÿæ§‹é€ ç¤ºæ„åœ–æ™‚ï¼Œæ¨™ç¤ºç‚ºã€Œå·¦å¿ƒå®¤ã€çš„éƒ¨ä½é€šå¸¸ä½æ–¼åœ–ç‰‡çš„å“ªä¸€å´ï¼Ÿ", options: ["åœ–ç‰‡çš„å·¦å´", "åœ–ç‰‡çš„å³å´", "åœ–ç‰‡çš„æ­£ä¸­å¤®", "åœ–ç‰‡çš„ä¸Šæ–¹"], correct: 1, cat: "æ–¹ä½", feedback: "æ–¹ä½æ‡‰ä»¥å—æ¸¬è€…ç‚ºæº–ï¼Œæ‚¨çš„å³æ‰‹é‚Šå³ç‚ºå—æ¸¬è€…çš„å·¦å´ã€‚" },
        { q: "å‹•è„ˆçš„ç®¡å£è¼ƒåšä¸”å¯Œå½ˆæ€§ï¼Œå…¶ä¸»è¦çš„ç”Ÿç†åŠŸèƒ½ç‚ºä½•ï¼Ÿ", options: ["è®“é¤Šåˆ†å¿«é€Ÿæ»²é€åˆ°çµ„ç¹”ç´°èƒ", "é˜²æ­¢è¡€æ¶²åœ¨æµå‹•ä¸­ç”¢ç”Ÿé€†æµ", "æ‰¿å—å¿ƒè‡Ÿæ”¶ç¸®æ™‚æ“ å£“å‡ºçš„è¡€æ¶²é«˜å£“", "å¢åŠ è¡€æ¶²ä¸­äºŒæ°§åŒ–ç¢³çš„æ“´æ•£é€Ÿåº¦"], correct: 2, cat: "è¡€ç®¡", feedback: "å‹•è„ˆçš„é«˜å½ˆæ€§èˆ‡åšåº¦æ˜¯ç‚ºäº†æ‰¿å—å¿ƒå®¤æ³µè¡€æ™‚çš„å·¨å¤§è¡€å£“ã€‚" },
        { q: "ä¸‹åˆ—é—œæ–¼äººé«”è¡€ç®¡å…§ã€Œç“£è†œã€çš„æ•˜è¿°ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ", options: ["æ‰€æœ‰çš„è¡€ç®¡éƒ½å…·æœ‰ç“£è†œ", "ç“£è†œåƒ…å­˜åœ¨æ–¼å¿ƒè‡Ÿå…§", "å­˜åœ¨æ–¼å¿ƒè‡ŸåŠéƒ¨åˆ†éœè„ˆä¸­", "å‹•è„ˆå£“åŠ›å¤§ï¼Œæ‰€ä»¥æ›´éœ€è¦ç“£è†œ"], correct: 2, cat: "è¡€ç®¡", feedback: "ç“£è†œå­˜åœ¨æ–¼å¿ƒè‡ŸåŠéƒ¨åˆ†éœè„ˆä¸­ï¼Œç”¨ä»¥é˜²æ­¢è¡€æ¶²é€†æµã€‚" },
        { q: "æœ‰é—œã€Œè‚ºå‹•è„ˆã€å…§æµå‹•çš„è¡€æ¶²æ€§è³ªï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["å› ç‚ºæ˜¯å‹•è„ˆï¼Œæ‰€ä»¥æµå‹•è‘—é®®ç´…è‰²çš„å……æ°§è¡€", "å«è¼ƒé«˜æ¿ƒåº¦äºŒæ°§åŒ–ç¢³ï¼Œå±¬æ–¼ç¼ºæ°§è¡€", "å«æœ‰è±å¯Œé¤Šåˆ†æº–å‚™é€å¾€å…¨èº«", "æµé€Ÿæœ€æ…¢ä»¥åˆ©æ–¼é€²è¡Œç‰©è³ªäº¤æ›"], correct: 1, cat: "è‚ºå¾ªç’°", feedback: "è‚ºå‹•è„ˆæ˜¯å°‡ç¼ºæ°§è¡€é€å¾€è‚ºéƒ¨å¾®è¡€ç®¡é€²è¡Œäº¤æ›ã€‚" },
        { q: "äººé«”çš„ã€Œé«”å¾ªç’°ã€èˆ‡ã€Œè‚ºå¾ªç’°ã€åœ¨é‹ä½œæ™‚é–“ä¸Šå…·æœ‰ä»€éº¼ç‰¹æ€§ï¼Ÿ", options: ["å…©è€…åŒæ™‚é€²è¡Œï¼Œåœ¨å¿ƒè‡Ÿäº¤æœƒ", "å…ˆå®Œæˆé«”å¾ªç’°å¾Œæ‰å•Ÿå‹•è‚ºå¾ªç’°", "ç™½å¤©é€²è¡Œé«”å¾ªç’°ï¼Œæ™šä¸Šé€²è¡Œè‚ºå¾ªç’°", "é«”å¾ªç’°è² è²¬æ°§æ°£ï¼Œè‚ºå¾ªç’°åªè² è²¬å»¢ç‰©"], correct: 0, cat: "é‹ä½œ", feedback: "é«”å¾ªç’°èˆ‡è‚ºå¾ªç’°åœ¨å¿ƒè‡Ÿäº¤æœƒä¸”åŒæ™‚é€²è¡Œã€‚" },
        { q: "å°æ˜å—å‚·æµè¡€ï¼Œå‚·å£è‡ªå‹•åœæ­¢æµè¡€ä¸¦çµç—‚ï¼Œé€™ä¸»è¦æ˜¯å“ªç¨®æˆåˆ†çš„åŠŸå‹ï¼Ÿ", options: ["ç´…è¡€çƒ", "ç™½è¡€çƒ", "è¡€æ¼¿", "è¡€å°æ¿"], correct: 3, cat: "è¡€çƒ", feedback: "è¡€å°æ¿çš„åŠŸèƒ½æ˜¯ä¿ƒä½¿è¡€æ¶²å‡å›ºã€é˜»å¡å‚·å£ã€‚" },
        { q: "é—œæ–¼è¡€ç®¡æ€§è³ªçš„æ¯”è¼ƒï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ", options: ["è¡€å£“é«˜ä½ï¼šå‹•è„ˆ > å¾®è¡€ç®¡ > éœè„ˆ", "ç®¡è…”å¤§å°ï¼šå‹•è„ˆ > éœè„ˆ > å¾®è¡€ç®¡", "æµé€Ÿå¿«æ…¢ï¼šå¾®è¡€ç®¡ > éœè„ˆ > å‹•è„ˆ", "å£åšç¨‹åº¦ï¼šå¾®è¡€ç®¡ > éœè„ˆ > å‹•è„ˆ"], correct: 0, cat: "è¡€ç®¡", feedback: "è¡€å£“ç”±å‹•è„ˆèµ·æœ€é«˜ï¼Œéœè„ˆæœ€ä½ï¼›å¾®è¡€ç®¡å‰‡æµé€Ÿæœ€æ…¢ã€‚" },
        { q: "åœ¨é¡¯å¾®é¡ä¸‹è§€å¯Ÿè¡€æ¶²æŠ¹ç‰‡æ™‚ï¼Œè‹¥çœ‹åˆ°å…·æœ‰ã€Œç´°èƒæ ¸ã€çš„ç´°èƒï¼Œæœ€å¯èƒ½æ˜¯ï¼Ÿ", options: ["ç´…è¡€çƒ", "ç™½è¡€çƒ", "è¡€å°æ¿", "è¡€æ¼¿é¤Šåˆ†çµæ™¶"], correct: 1, cat: "è¡€çƒ", feedback: "ç™½è¡€çƒå…·æœ‰ç´°èƒæ ¸ï¼Œè€Œæˆç†Ÿç´…è¡€çƒèˆ‡è¡€å°æ¿çš†ç„¡ç´°èƒæ ¸ã€‚" },
        { q: "äººé«”å…§é€²è¡Œã€Œæ°£é«”äº¤æ›ã€ï¼ˆæ°§æ°£èˆ‡äºŒæ°§åŒ–ç¢³æ“´æ•£ï¼‰çš„ç¢ºåˆ‡åœ°é»æ˜¯åœ¨ä½•è™•ï¼Ÿ", options: ["ä¸»å‹•è„ˆ", "å¾®è¡€ç®¡", "å³å¿ƒæˆ¿", "å¤§éœè„ˆ"], correct: 1, cat: "è¡€ç®¡", feedback: "å¾®è¡€ç®¡åƒ…ç”±ä¸€å±¤ç´°èƒçµ„æˆï¼Œæ˜¯é€²è¡Œç‰©è³ªäº¤æ›çš„å”¯ä¸€å ´æ‰€ã€‚" },
        { q: "è¡€æ¶²ä¸­çš„ã€Œè¡€æ¼¿ã€ä¸»è¦æˆåˆ†æ˜¯æ°´ï¼Œé™¤äº†é‹é€å»¢ç‰©å¤–ï¼Œé‚„è² è²¬é‹é€ï¼Ÿ", options: ["å¤§éƒ¨åˆ†çš„æ°§æ°£", "æ¿€ç´ èˆ‡é¤Šåˆ†", "ç—…åŸé«”", "ç´…è¡€çƒçš„ç´°èƒæ ¸"], correct: 1, cat: "è¡€çƒ", feedback: "è¡€æ¼¿æº¶æœ‰é¤Šåˆ†ã€æ¿€ç´ ã€æŠ—é«”åŠä»£è¬å»¢ç‰©ã€‚" },
        { q: "é—œæ–¼ã€Œè‚ºå¾ªç’°ã€çš„çµ‚é»ï¼Œè¡€æ¶²æœ€çµ‚æœƒæµå…¥å¿ƒè‡Ÿçš„å“ªä¸€å€‹è…”å®¤ï¼Ÿ", options: ["å·¦å¿ƒæˆ¿", "å³å¿ƒæˆ¿", "å·¦å¿ƒå®¤", "å³å¿ƒå®¤"], correct: 0, cat: "è‚ºå¾ªç’°", feedback: "æ›æ°§å¾Œçš„å……æ°§è¡€ç¶“ç”±è‚ºéœè„ˆæµå›å·¦å¿ƒæˆ¿ã€‚" },
        { q: "å¿ƒè‡Ÿçš„ã€Œå·¦å¿ƒå®¤ã€å£æ¯”ã€Œå³å¿ƒå®¤ã€å£åšï¼Œä¸»å› èˆ‡ä¸‹åˆ—ä½•è€…æœ€ç›¸é—œï¼Ÿ", options: ["å·¦å´è£çš„æ˜¯å……æ°§è¡€ï¼Œæ¯”è¼ƒé‡", "ç‚ºäº†é˜²æ­¢è¡€æ¶²é€†æµå›å·¦å¿ƒæˆ¿", "éœ€è¦ç”¢ç”Ÿè¶³å¤ å£“åŠ›å°‡è¡€æ¶²é€åˆ°å…¨èº«", "å·¦å¿ƒå®¤è² è²¬æ¥æ”¶è‚ºéƒ¨çš„å£“åŠ›"], correct: 2, cat: "æ–¹ä½", feedback: "å·¦å¿ƒå®¤ç‚ºé«”å¾ªç’°èµ·é»ï¼Œéœ€ç”¢ç”Ÿå¤§å£“åŠ›å°‡è¡€æ¶²é€å¾€å…¨èº«ã€‚" },
        { q: "é†«ç”Ÿå¾ç—…äººæ‰‹è‡‚æŠ½è¡€æˆ–æ³¨å°„è—¥ç‰©ï¼Œé€šå¸¸æ˜¯é¸æ“‡å“ªä¸€ç¨®è¡€ç®¡ï¼Ÿ", options: ["å‹•è„ˆ", "å¾®è¡€ç®¡", "éœè„ˆ", "ç“£è†œè™•"], correct: 2, cat: "è¡€ç®¡", feedback: "éœè„ˆä½æ–¼æ·ºå±¤ä¸”å£“åŠ›ä½ï¼Œæ˜¯è‡¨åºŠæŠ½è¡€çš„é¦–é¸ã€‚" },
        { q: "äººé«”è¡€æ¶²å¾ªç’°ç³»çµ±ä¸­ï¼Œå“ªä¸€æ¢è¡€ç®¡å…§æµå‹•çš„è¡€æ¶²ã€Œæ°§æ°£å«é‡æœ€é«˜ã€ï¼Ÿ", options: ["è‚ºå‹•è„ˆ", "ä¸Šå¤§éœè„ˆ", "è‚ºéœè„ˆ", "å³å¿ƒæˆ¿å…§çš„è¡€"], correct: 2, cat: "è‚ºå¾ªç’°", feedback: "è‚ºéœè„ˆè£è¼‰å‰›æ›å¥½çš„æ°§æ°£å›æµå¿ƒè‡Ÿï¼Œå«æ°§é‡æœ€é«˜ã€‚" },
        { q: "å°è¯åƒä¸‹æ„Ÿå†’è—¥å¾Œï¼Œè—¥æ•ˆèƒ½ä½œç”¨åˆ°é¼»å­ï¼Œé€™ä¸»è¦æ˜¯ä¾è³´ï¼Ÿ", options: ["è—¥ç‰©å¾é£Ÿé“ç›´æ¥çˆ¬åˆ°é¼»è…”", "è—¥ç‰©ç¶“ç”±è¡€æ¶²å¾ªç’°é‹è¼¸è‡³å…¨èº«", "é¼»å­ä¸»å‹•å¸å–èƒƒéƒ¨çš„è—¥ç‰©", "è—¥ç‰©éš¨è‘—ç¥ç¶“å‚³å°ç§»å‹•"], correct: 1, cat: "é‹ä½œ", feedback: "è¡€æ¶²å¾ªç’°è² è²¬é«”å…§æ‰€æœ‰ç‰©è³ªçš„é‹è¼¸å·¥ä½œã€‚" }
    ];

    const diagnosisTips = {
        "æ–¹ä½": { icon: "ğŸ§­", title: "ç©ºé–“æ–¹ä½è§€å¿µ", text: "ä½ å°å¿ƒè‡Ÿè…”å®¤çš„å·¦å³å°æ‡‰æœ‰æ‰€æ··æ·†ã€‚è¨˜å¾—ï¼šè€ƒå·ä¸Šçš„å¿ƒè‡Ÿæ˜¯é¢å°ä½ çš„ç—…äººï¼Œä½ çš„å³æ‰‹å°æ‡‰å°æ–¹çš„å·¦å´ã€‚å¦å¤–ï¼Œå·¦å¿ƒå®¤å£è¼ƒåšæ˜¯å› ç‚ºå®ƒè¦è² è²¬è·¯ç¨‹æœ€é çš„é«”å¾ªç’°ã€‚" },
        "è¡€ç®¡": { icon: "ğŸ›£ï¸", title: "è¡€ç®¡ç‰¹æ€§èˆ‡åŠŸèƒ½", text: "ä½ ä¼¼ä¹æ··æ·†äº†ä¸‰ç¨®è¡€ç®¡çš„ç‰¹å¾µã€‚è«‹è¨˜ä½ï¼šå‹•è„ˆæ˜¯ã€è€é«˜å£“ã€ã€å¾®è¡€ç®¡æ˜¯ã€æ‹¼äº¤æ›ã€ï¼ˆåªæœ‰ä¸€å±¤ç´°èƒåšï¼‰ã€éœè„ˆæ˜¯ã€é ç“£è†œã€é˜²æ­¢è¡€æ¶²å€’æµã€‚" },
        "è‚ºå¾ªç’°": { icon: "ğŸ«", title: "è‚ºå¾ªç’°èˆ‡å«æ°§é‡", text: "æ³¨æ„ï¼è‚ºå¾ªç’°æ˜¯æœ€å¤§çš„é™·é˜±å€ã€‚ä¸¦éå‹•è„ˆéƒ½è£æ°§æ°£ï¼Œè‚ºå‹•è„ˆè£çš„æ˜¯ç¼ºæ°§è¡€ï¼›è€Œè‚ºéœè„ˆæ‰æ˜¯å…¨èº«æ°§æ°£æœ€å……è¶³ã€é¡è‰²æœ€é®®ç´…çš„è¡€ç®¡ã€‚" },
        "è¡€çƒ": { icon: "ğŸ”¬", title: "è¡€æ¶²æˆåˆ†ç‰¹å¾µ", text: "é—œæ–¼è¡€çƒï¼Œè«‹é–å®šæ ¸å¿ƒé—œéµå­—ï¼šç™½è¡€çƒæœ‰ã€æ ¸ã€ã€ç´…è¡€çƒè² è²¬ã€æ°§ã€ã€è¡€å°æ¿è² è²¬ã€æ­¢è¡€ã€ã€‚è¡€æ¼¿å‰‡æ˜¯è² è²¬é‹é€æº¶è§£åœ¨æ°´è£¡çš„ç‰©è³ªï¼ˆé¤Šåˆ†ã€å»¢ç‰©ã€æ¿€ç´ ï¼‰ã€‚" },
        "é‹ä½œ": { icon: "ğŸ”„", title: "å¾ªç’°åŒæ­¥æ€§è§€å¿µ", text: "è«‹ä¿®æ­£è§€å¿µï¼šé«”å¾ªç’°èˆ‡è‚ºå¾ªç’°æ˜¯ã€åŒæ™‚ç™¼ç”Ÿçš„ã€ï¼Œè¡€æ¶²ä¸€é‚Šè¢«æ³µå¾€å…¨èº«ï¼Œå¦ä¸€é‚Šæ­£è¢«æ³µå¾€è‚ºéƒ¨ï¼Œä¸¦éå…ˆå¾Œæ¥åŠ›è·‘å®Œä¸€åœˆã€‚" }
    };

    const container = document.getElementById('questions-container');
    quizData.forEach((item, index) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question-block';
        qDiv.innerHTML = `<div class="question-title">${index + 1}. ${item.q}</div><div class="options-grid">${item.options.map((opt, i) => `<label class="option-label"><input type="radio" name="q${index}" value="${i}"><span>${opt}</span></label>`).join('')}</div>`;
        container.appendChild(qDiv);
    });

    function gradeQuiz() {
        let score = 0;
        let wrongCats = new Set();
        const analysis = document.getElementById('analysis-container');
        analysis.innerHTML = '';
        let allAnswered = true;

        quizData.forEach((item, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            if (!selected) { allAnswered = false; return; }
            const userAns = parseInt(selected.value);
            const isCorrect = userAns === item.correct;
            if (isCorrect) {
                score++;
            } else {
                wrongCats.add(item.cat);
            }
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = `feedback-item ${isCorrect ? 'correct' : 'wrong'}`;
            feedbackDiv.innerHTML = `<span class="feedback-q-text">ç¬¬ ${index + 1} é¡Œï¼š${item.q}</span><strong>çµæœï¼š${isCorrect ? 'æ­£ç¢º' : 'éŒ¯èª¤'}</strong><br>æ‚¨çš„é¸æ“‡ï¼š${item.options[userAns]}<br>æ­£ç¢ºç­”æ¡ˆï¼š${item.options[item.correct]}<p>ğŸ’¡ è§£æï¼š${item.feedback}</p>`;
            analysis.appendChild(feedbackDiv);
        });

        if (!allAnswered) { alert("è«‹å®Œæˆæ‰€æœ‰é¡Œç›®å¾Œå†æäº¤å–”ï¼"); return; }

        document.getElementById('final-score-text').innerText = `ä½ ç­”å°äº† ${score} / 15 é¡Œ`;
        
        const diagContainer = document.getElementById('diagnosis-container');
        diagContainer.innerHTML = '';
        if (wrongCats.size === 0) {
            diagContainer.innerHTML = '<div class="diagnostic-card" style="border-color: var(--correct-color); background: #f1fcf4;"><div class="diagnostic-icon">ğŸ…</div><div class="diagnostic-content"><h4>å®Œç¾æŒæ§ï¼</h4><p>ä½ å®Œå…¨é¿é–‹äº†æ‰€æœ‰å¸¸è¦‹çš„æ€ç¶­é™·é˜±ï¼Œè§€å¿µéå¸¸ç´®å¯¦ã€‚</p></div></div>';
        } else {
            wrongCats.forEach(cat => {
                const tip = diagnosisTips[cat];
                const card = document.createElement('div');
                card.className = 'diagnostic-card';
                card.innerHTML = `<div class="diagnostic-icon">${tip.icon}</div><div class="diagnostic-content"><h4>${tip.title}</h4><p>${tip.text}</p></div>`;
                diagContainer.appendChild(card);
            });
        }

        let evalText = score === 15 ? "ğŸ† ä½ æ˜¯é‹è¼¸ç³»çµ±å°ˆå®¶ï¼" : score >= 12 ? "âœ¨ éå¸¸å„ªç§€ï¼Œåªè¦é‡æ¸…è¨ºæ–·å ±å‘Šä¸­çš„ç´°ç¯€å³å¯ã€‚" : "ğŸ“– åŸºç¤è§€å¿µå°šå¯ï¼Œè«‹å‹™å¿…è©³é–±è¨ºæ–·å»ºè­°ã€‚";
        document.getElementById('evaluation-text').innerText = evalText;
        document.getElementById('quiz-form').style.display = 'none';
        document.getElementById('result-display').style.display = 'block';
        window.scrollTo(0, 0);
    }
</script>
</body>
</html>